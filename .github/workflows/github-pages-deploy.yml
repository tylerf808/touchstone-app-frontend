name: Build and Deploy

on:
     push:
       branches: [ main ]
jobs:
     build-and-deploy:
       runs-on: ubuntu-latest
       steps:
         - uses: actions/checkout@v2
         - name: Install and Build
           env:
             REACT_APP_TEST_URL: testing
             REACT_APP_ENVIRONMENT: ${{ secrets.REACT_APP_ENVIRONMENT}}
             REACT_APP_GOOGLE_MAPS_API_KEY: ${{ secrets.REACT_APP_GOOGLE_MAPS_API_KEY}}
           run: |
             npm install
             npm run build
         - name: Deploy
           uses: JamesIves/github-pages-deploy-action@4.1.0
           with:
             branch: gh-pages
             folder: build